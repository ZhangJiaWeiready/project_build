//引入gulpconst gulp = require("gulp");const concat = require("gulp-concat");const rename = require("gulp-rename");const uglify = require("gulp-uglify");const less = require('gulp-less');const cleanCss = require('gulp-clean-css');const htmlmin = require('gulp-htmlmin');const connect = require('gulp-connect');const open = require('open')//执行任务任务gulp.task('jsTask',function () {        //待合并的资源    return gulp.src('src/js/*.js')        //合并后的名称    .pipe(concat('built.js',{newLine:';'}))        //合并后的目录        .pipe(gulp.dest('dist/js'))        //压缩重命名 不然压缩后又是同一个名称会覆盖        .pipe(rename({suffix:'.min'}))        .pipe(uglify())        .pipe(gulp.dest('dist/js'))        .pipe(connect.reload())});//less处理任务gulp.task('lessTask',function () {    return gulp.src('src/less/test3.less')        .pipe(less())        .pipe(gulp.dest('src/css'))        .pipe(connect.reload())})// 压缩css 依赖于lessgulp.task('cssTask',['lessTask'],function () {    return gulp.src('src/css/*.css')        //先组合在一起        .pipe(concat('built.css')) //组合后的名字        .pipe(gulp.dest('dist/css'))        //因为类型会重名覆盖 所以新命名后缀名        .pipe(rename({suffix:'.min'}))        .pipe(cleanCss({compatibility: 'ie8'}))        .pipe(gulp.dest('dist/css'))        .pipe(connect.reload())})//压缩htmlgulp.task('htmlTask',function () {    return gulp.src('index.html')        .pipe(htmlmin({collapseWhitespace: true}))        .pipe(gulp.dest('dist'))        .pipe(connect.reload())})//半自动化// gulp.task('watch',['default'],function () {//     //监听指定的文件，并制定对应的处理任务//     gulp.watch('src/js/*.js',['jsTask'])//     gulp.watch(['src/css/*.css','src/less/*.less'],['cssTask','lessTask'])// })//全自动化// 每个构建任务后添加    //.pipe(connect.reload())gulp.task('livereload',function () {    //配置加载的选项    connect.server({        root:'dist/', //监视源文件的目标路径        livereload:true, //是否实时刷新        port:5000    });    open('http://localhost:5000'); //自动打开    gulp.watch('src/js/*.js',['jsTask']);    gulp.watch(['src/css/*.css','src/less/*.less'],['cssTask'])})//定义默认任务 关联其他任务gulp.task('default',['jsTask','cssTask','htmlTask'])//合并 css /js//压缩//less转css//